!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.MMD=t.MMD||{})}(this,function(t){"use strict";var D=function(t,e,a){var n=new Uint8Array(t,e,a);return e=void 0===e?0:e,a=void 0===a?t.byteLength:a,String.fromCharCode.apply(null,n)},i=function(t){var e,a,n,r,i,d,f,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,u=void 0;if(u=t.getUint32(o),n="uuid"==(e=D(t.buffer,t.byteOffset+o+4,4)),a=1==u){var h=o+8,g=t.buffer.slice(h,h+8);r=new DataView(g),i=r.getUint32(0),d=r.getUint32(4),f=2147483647&i,u=0!=(2147483648&i)?-1*(4294967296*f+d):4294967296*f+d}return{type:e,size:u,headerLength:(a?8:0)+(n?128:0)+8,data:new DataView(t.buffer,t.byteOffset+o,u)}},O=function(t,e,a,n){var r=t[a](e);return e+=n,r+t[a](e)},j=function(t,e){var a=void 0;return t.map(function(t){e==t.type&&(a=t)}),a},k=function(t){try{var e=void 0,a=void 0,n=void 0;for((n=t)instanceof ArrayBuffer&&(n={data:new DataView(t),offset:0,headerLength:0,size:t.byteLength,type:"root"}),a=n.headerLength,e=[];;){var r=i(n.data,a);if(a+=r.size,e.push(r),a==n.size)break}return e}catch(t){return}},e=Object.freeze({getMediaInfo:function(t){var I,z={};return k(j(k(t),"moov")).map(function(t){if("mvhd"==t.type){var e=t.headerLength;e+=4+(1==t.data.getUint8(e)?16:8);var a=t.data.getUint32(e),n=t.data.getUint32(e+4);I=n/a}if("trak"==t.type){var r=k(t),i=j(r,"mdia"),d=k(i),f=j(d,"hdlr");if("vide"==D(f.data.buffer,f.data.byteOffset+16,4)){for(var o=j(d,"minf"),u=j(d,"mdhd"),h=k(o),g=j(h,"stbl"),v=k(g),s=j(v,"stts"),c=j(r,"tkhd"),p=s.data.getUint32(s.headerLength+4),y=[],b=s.headerLength+8,m=0;m<p;m++)y[m]={},y[m].timescale=s.data.getUint32(b+4*m),y[m].duration=s.data.getUint32(b+4*m+4);var l=u.data.getUint32(u.headerLength+12),U=c.data.byteLength-44,L=180*Math.atan2(c.data.getInt32(U+4),c.data.getInt32(U))/Math.PI,w=O(c.data,U+36,"getInt16",2),M=O(c.data,U+40,"getInt16",2);z={rotation:L,width:w,height:M,fps:l/y[0].duration,duration:I}}}}),z}});t.mp4=e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mmd.local.min.js.map
